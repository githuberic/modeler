# 位操作

## 位操作-运算符

### 与运算符（&）
运算规则：0&0=0;0&1=0;1&0=0;1&1=1; 即：两位同时为“1”，结果才为“1”，否则为0

例如：3&5  即 0000 0011 & 0000 0101 = 0000 0001   因此，3&5的值得1。

“与运算”的特殊用途：
（1）清零。如果想将一个单元清零，即使其全部二进制位为0，只要与一个各位都为零的数值相与，结果为零。
（2）取一个数中指定位

方法：找一个数，对应X要取的位，该数的对应位为1，其余位为零，此数与X进行“与运算”可以得到X中的指定位。 
例：设X=10101110， 取X的低4位，用 X & 0000 1111 = 0000 1110 即可得到； 还可用来取X的2、4、6位。

### 或运算符（|）

参加运算的两个对象，按二进制位进行“或”运算。
运算规则：0|0=0；   0|1=1；   1|0=1；    1|1=1； 即 ：参加运算的两个对象只要有一个为1，其值为1。
例如:3|5 即 0000 0011 | 0000 0101 = 0000 0111   因此，3|5的值得7。

另，负数按补码形式参加按位或运算。

“或运算”特殊作用：
（1）常用来对一个数据的某些位置1。
方法：找到一个数，对应X要置1的位，该数的对应位为1，其余位为零。此数与X相或可使X中的某些位置1。
例：将X=10100000的低4位置1 ，用 X | 0000 1111 = 1010 1111即可得到。

### 异或运算符（^）

参加运算的两个数据，按二进制位进行“异或”运算。
运算规则：0^0=0；   0^1=1；   1^0=1；   1^1=0；  即：参加运算的两个对象，如果两个相应位为“异”（值不同），则该位结果为1，否则为0。

“异或运算”的特殊作用：
（1）使特定位翻转找一个数，对应X要翻转的各位，该数的对应位为1，其余位为零，此数与X对应位异或即可。
例：X=10101110，使X低4位翻转，用X ^ 0000 1111 = 1010 0001即可得到。
（2）与0相异或，保留原值 ，X ^ 0000 0000 = 1010 1110。

### 反运算符（~）
参加运算的一个数据，按二进制位进行“取反”运算。
运算规则：~1=0；   ~0=1；  即：对一个二进制数按位取反，即将0变1，1变0。
使一个数的最低位为零，可以表示为：a&~1。
~1的值为1111111111111110，再按“与”运算，最低位一定为0。因为“~”运算符的优先级比算术运算符、关系运算符、逻辑运算符和其他运算符都高。

java中用补码表示二进制数，补码的最高位是符号位，最高位为“0”表示正数，最高位为“1”表示负数。

### java中有三种移位运算符
- 左移运算符，num << 1,相当于num乘以2
- 右移运算符，num >> 1,相当于num除以2
- >>> 无符号右移，忽略符号位，空位都以0补齐

### 技巧
- 乘法除法：n * 2 等价于 n << 1； n * 5 等价于 n << 2 + 1； n / 2 等价于 n >> 1
- 取低位：n & 0x0000FFFF；取高位：n & 0xFFFF0000。
- 奇偶判断：n & 1，等于0为偶，等于1为奇。
- 正负判断：(n >>> 31) & 1，等于0为正，等于1为负。
- 取余：n % m ，如m为2的幂次方，可用(n & (m - 1))替代
